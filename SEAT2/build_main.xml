<project name="IIB-CI-MAIN" default="dev" basedir="..">
  <description>IIB Continuous Integration(main script)</description>
	
	<property name = "app.name" value = ""/>
	<property name = "env.wrksp" value = ""/>
	<property name = "iib.svr" value = ""/>
  <target name="init">
    <tstamp />

  	<property name = "path.parent" value = "${basedir}"/>
  	
  	<property name="path.build" value="SEAT2" />
  	<property file="${path.build}/build.properties" />
  </target>

  <target name="dev" depends="init">

 	 <!-- Applying Bar Override using Properties File -->
 	
   <exec executable="mqsiapplybaroverride">
     <arg value="-b" />
     <arg value="${var.path}SEAT2/${app.name}_DEV.bar" />
     <arg value="-p" />
   	<arg value="${env.wrksp}/BarfileOverrides/SEAT2/${app.name}_SEAT2.properties"/>
	  <arg value="-r" /> 
	  <arg value="-o" />
   	<arg value="${var.path}${app.name}_SEAT2.bar"/>
   </exec>
 	
 	 <!-- Deploying Bar files to specific environment-->
 	
   <exec executable="mqsideploy">
     <arg value="-n" />
     <arg value="${iib.brkfileloc}${iib.brkfilename1}" />
     <arg value="-e" />
     <arg value="${iib.svr}" />
     <arg value="-a" />
     <arg value="${var.path}${app.name}_SEAT2.bar" />
   </exec>
 	
   <exec executable="mqsideploy">
     <arg value="-n" />
     <arg value="${iib.brkfileloc}${iib.brkfilename2}" />
     <arg value="-e" />
     <arg value="${iib.svr}" />
     <arg value="-a" />
     <arg value="${var.path}${app.name}_SEAT2.bar" />
   </exec>
 	
 	<!-- Backing up deployed Bar files with Date Time Stamp-->
 	
 	<copy file="${var.path}${app.name}_SEAT2.bar" overwrite="true" tofile="${var.path}backup/SEAT2/${app.name}_SEAT2.bar_${DSTAMP}${TSTAMP}"/>
  	
  	<!--Moving SEAT2 Bar file to PROD folder for deployment-->
  	
  	<move file="${var.path}${app.name}_SEAT2.bar" overwrite="true" tofile="${var.path}PROD/${app.name}_SEAT2.bar"/>

  	 </target>
</project>
